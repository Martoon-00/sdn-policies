# SDN policies concurrent composition

## Overview

This project is prototype for algorithm of concurrent policies composition.
Keypoints:

* Algorithm is optimized for the case when policies do not conflict with each
other and thus _commute_, i.e order of their application is irrelevant.

* Protocol is based on principle of Software Transactional Network, where in
presence of conflict policy is denied and client is notified about that.
This allows easer network configuration management and provides more control
comparing to protocols which perform some conflict resolution in place.

## Structure

Most intersting modules are:

* [Phases](./src/Sdn/Protocol/Phases.hs) module - logic which lies beyond each phrase
* [Topology](./src/Sdn/Protocol/Topology.hs) module - functions which construct a network with appropriate processes

## Launch

To launch demo you need [stack](https://docs.haskellstack.org/en/stable/README/) tool.

Executing `./launch-demo.sh` performs 1 consensus ballot with 1 proposed policy.

## Used tools

This prototype uses **time-warp** library. This allows to write some properties
for protocol, like
> * 2 / 3 acceptors are online => proposed policies still can be applied

emulating passage of time and network unreliability.

## Tests

Tests consist of several scenarious run and checked on various properties.

* [Properties](./test/Test/Sdn/Properties.hs) module - contains list of properties
* [ClassicSpec](./test/Test/Sdn/ClassicSpec.hs) module - contains test scenarious.

Scenarious are:

* **emulated** - tests pass instantly regardless of protocol timings due to 
emulation mode;

* **generated** - when scenario allows parametrization, specified numbers are
generated by QuickCheck; parameters may be
  
  * ballots number / duration

  * policy proposal rate
  
  * network delays / nodes availability

* **deterministic** - if test has failed, HSpec will prompt a random seed;
this seed may be used to repeat the test with exactly the same outcome.
